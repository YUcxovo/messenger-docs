---
sidebar_position: 4
---

# Text

Text rendering is more complex than simple shapes because a single character may need to draw hundreds of triangles based on its shape.

Modern game engines mainly use one of the following techniques to render text (https://stackoverflow.com/questions/25956272/better-quality-text-in-webgl):

- Geometry Meshes: draw triangles
- Bitmap Font: pre-generated bitmap font images
- SDF: pre-generated image, but better quality

The first one is to generate the shapes of the font at runtime while later two require a preprocessed image.

Unity's TextMesh Pro uses SDF method to render text ([source](https://docs.unity3d.com/6000.0/Documentation/Manual/UIE-get-started-with-text.html)).

Elm REGL uses _Multi-channel signed distance_ (**MSDF**) to render text. It has better effects than SDF font.

Elm REGL JS with builtin font has `consolas` font built in, users could directly use this font.

## Textbox

If you only need to render several characters with no style or multi-line demanding, you could use the simpler text API `textbox`.

```elm title="Definition of textbox"
{-| Render a textbox.
-}
textbox : ( Float, Float ) -> Float -> String -> String -> Color -> Renderable
textbox ( x, y ) size text font color =
    ...
```

## Textbox Pro

However, if you want to render multi-line paragraph or uses bold or italic styles, you need to use a more advanced API: `textboxPro`:

```elm
{-| Full TextBox options.
-}
type alias TextBoxOption =
    { font : String
    , text : String
    , size : Float
    , color : Color
    , wordBreak : Bool
    , thickness : Maybe Float
    , italic : Maybe Float
    , width : Maybe Float
    , lineHeight : Maybe Float
    , wordSpacing : Maybe Float
    , align : Maybe String
    , letterSpacing : Maybe Float
    }

{-| Render a textbox with more options.
-}
textboxPro : ( Float, Float ) -> TextBoxOption -> Renderable
textboxPro ( x, y ) opt =
    ...
```

Here `thickness` and `italic` are floats so users could specify how much they want to apply that style. The effect is done through shaders so it is not as accurate as the font's own variants.

## Custom Font

Elm REGL only recognizes the configuration file generated by [msdf-bmfont-xml](https://github.com/soimy/msdf-bmfont-xml).

There's also an [online generator](https://msdf-bmfont.donmccurdy.com/) but we recommend you to run the tool locally to have better results.

First install this tool using your node package manager, such as `pnpm`:

```bash
pnpm install msdf-bmfont-xml -g
```

To generate a font asset, first prepare you font TTF file, _e.g._, `a.ttf`.

Then, run the following command alongside the font file:

```bash
msdf-bmfont --smart-size --pot a.ttf
```